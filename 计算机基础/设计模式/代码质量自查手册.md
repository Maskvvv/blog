![](http://qiniu.zhouhongyin.top/2023/05/17/1684308673-image-20230517153113068.png)

# 面向对象

![](http://qiniu.zhouhongyin.top/2023/05/17/1684308911-Snipaste_2023-05-17_15-33-52.png)

# 设计原则

![](http://qiniu.zhouhongyin.top/2023/05/17/1684309136-Snipaste_2023-05-17_15-38-11.png)

# 重构

![](https://static001.geekbang.org/resource/image/fc/8a/fc56f7c2b348d324c93a09dd0dee538a.jpg?wh=2661*4764)

# 如何发现代码质量问题 · 常规 checklist

- 目录设置是否合理、模块划分是否清晰、代码结构是否满足“高内聚、松耦合”？
- 是否遵循经典的设计原则和设计思想（SOLID、DRY、KISS、YAGNI、LOD 等）？
  - SOLID原则-SRP单一职责原则
  - SOLID原则-OCP开闭原则
  - SOLID原则-LSP里式替换原则
  - SOLID原则-ISP接口隔离原则
  - SOLID原则-DIP依赖倒置原则
  - DRY原则 - 不要写重复的代码
  - KISS原则 - 尽量保持简单
  - YAGNI原则 - 不要去设计编写当前用不到的功能
  - LOD法则 - 高内聚、松耦合

- 设计模式是否应用得当？是否有过度设计？
- 代码是否容易扩展？如果要添加新功能，是否容易实现？
- 代码是否可以复用？是否可以复用已有的项目代码或类库？是否有重复造轮子？
- 代码是否容易测试？单元测试是否全面覆盖了各种正常和异常的情况？
- 代码是否易读？是否符合编码规范（比如命名和注释是否恰当、代码风格是否一致等）？

# 如何发现代码质量问题 · 业务需求 checklist

- 代码是否实现了预期的业务需求？逻辑是否正确？
- 是否处理了各种异常情况？日志打印是否得当？是否方便 debug 排查问题？
- 接口是否易用？是否支持幂等、事务等？
- 代码是否存在并发问题？是否线程安全？
- 性能是否有优化空间，比如，SQL、算法是否可以优化？
- 是否有安全漏洞？比如输入输出校验是否全面？

# 结合前面学的设计原则和质量手册，我想了如下问题： 

1、分了哪些模块，每个模块负责的事情是什么，满足单一职责么 

2、具体某个模块分了哪些包，每个包放什么样的类，分类是否合理重复 

3、具体到某个类，命名是否清晰简单，注释是否包含做什么、为什么做、如何做，API是否有如何用 4、类的属性有哪些，是否有魔数，属性结构是否统一，是否有非关联的属性，是否有大函数，每个函数的职责是否单一，某些函数是否可复用和抽象，是否可读

 5、是否使用了设计模式，使用了什么设计模式，是否可以不用，如果非要用带来的好处是什么以及不用带来的坏处 

6、如果要新增或者修改功能是否好扩展，是否满足开闭 

7、某些函数是否可以复用，是否有现成的工具，强烈建议每个团队内部都有一个工具包 

8、代码是否有异常会影响原有逻辑么，如果有怎么解决，想想兜底或者降级方案 

9、是否有并发问题，如果出现了会有什么影响，怎么解决 

10、代码是否有测试用例，是否覆盖了正常合异常的情况

